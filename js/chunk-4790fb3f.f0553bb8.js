(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4790fb3f"],{"0f11":function(e,t,n){},"3f2f":function(e,t,n){"use strict";n("a25f")},"72f9":function(e,t,n){"use strict";var a=n("7a23");const o={id:"main"},r={class:"container"};function c(e,t,n,c,l,i){const s=Object(a["resolveComponent"])("van-nav-bar");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(s,{class:"mb-4","left-text":e.pageTitle,"left-arrow":"","safe-area-inset-top":"",border:!1,onClickLeft:e.backRouter},{right:Object(a["withCtx"])(()=>[Object(a["renderSlot"])(e.$slots,"navRight",{},void 0,!0)]),_:3},8,["left-text","onClickLeft"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])])],64)}var l=Object(a["defineComponent"])({name:"SubLayout",slot:["navRight"],props:{pageTitle:{type:String,default:""},backRouter:{type:Function,default:()=>{window.history.back()}}}}),i=(n("3f2f"),n("6b0d")),s=n.n(i);const d=s()(l,[["render",c],["__scopeId","data-v-bec054d8"]]);t["a"]=d},"8d29":function(e,t,n){},"9e84":function(e,t,n){"use strict";n("8d29")},a0aa:function(e,t,n){"use strict";var a=n("7a23");const o={class:"grid grid-cols-2 gap-2"},r={class:"info"},c={class:"info__text"},l={class:"info"},i={class:"info__text"};function s(e,t,n,s,d,b){const u=Object(a["resolveComponent"])("svg-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(u,{name:"cash",size:28}),Object(a["createElementVNode"])("div",c,Object(a["toDisplayString"])(e.numeralHelper.asFloat(e.pay_out_balance,2)),1)]),Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(u,{name:"coin",size:28}),Object(a["createElementVNode"])("div",i,Object(a["toDisplayString"])(e.numeralHelper.asFloat(e.coin_balance,2)),1)])])}var d=n("1e5b"),b=n("c69a"),u=n("dcfe"),f=Object(a["defineComponent"])({name:"MyEarn",setup(){const e=Object(d["d"])({coin_balance:"",pay_out_balance:""}),t=async()=>{const t=await b["a"].GetBalance();e.coin_balance=t.data.coin_balance,e.pay_out_balance=t.data.pay_out_balance};return Object(d["c"])(async()=>{await t()}),{...Object(d["f"])(e),numeralHelper:u["a"]}}}),g=(n("f46c"),n("6b0d")),p=n.n(g);const m=p()(f,[["render",s],["__scopeId","data-v-6b7f6702"]]);t["a"]=m},a25f:function(e,t,n){},cd1e:function(e,t,n){"use strict";var a=n("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-44135f74"),e=e(),Object(a["popScopeId"])(),e),r={class:"container relative",ref:"sectorContainer"},c={class:"sector",ref:"sector"},l=o(()=>Object(a["createElementVNode"])("div",{class:"sector__before"},null,-1)),i={class:"sector__content"},s=o(()=>Object(a["createElementVNode"])("div",{class:"sector__after"},null,-1));function d(e,t,n,o,d,b){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",c,[l,Object(a["createElementVNode"])("div",i,Object(a["toDisplayString"])(e.text),1),s],512)],512)])}var b=n("a0aa"),u=n("72f9"),f=n("1e5b");var g=Object(a["defineComponent"])({name:"Sector",components:{SubLayout:u["a"],MyEarn:b["a"]},props:{diameter:{type:Number,default:200},unit:{type:String,default:"px"},backgroundColor:{type:String,default:"#000"},borderThickness:{type:Number,default:2},borderColor:{type:String,default:"#ab0"},sectorAngleInDegree:{type:Number,default:45},initialQuadrant:{type:Number,default:2},text:{type:String,default:"12340"},fontSize:{type:String,default:"10px"},fontColor:{type:String,default:"#fff"}},setup(e){const t=Object(a["ref"])(),n=Object(a["ref"])();return Object(f["c"])(()=>{const a=e.unit,o=`${e.diameter/2}${a}`,r=`${e.diameter}${a}`,c=e.backgroundColor,l=e.borderColor,i=e.borderThickness,s=`${i}${a} ${i}${a} 0`,d=`${o} ${o} 0 0`,b=`${o} ${o}`,u=-90,f=e.fontSize,g=e.fontColor,p={marginLeft:o,width:o,height:r,borderRadius:`0 ${o} ${o} 0`,transform:`rotate(${90*(e.initialQuadrant-1)}deg)`,transformOrigin:"0px "+o},m={boxSizing:"border-box",width:r,height:o,backgroundColor:c,borderColor:l,borderWidth:s,borderRadius:d,transformOrigin:b},j={transform:`rotate(${u+e.sectorAngleInDegree}deg)`},O={transform:`rotate(${u+e.sectorAngleInDegree/2}deg)`,display:"flex",alignSelf:"flex-end",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",lineHeight:0,fontSize:f,color:g},v={transform:`rotate(${u+180}deg)`},h=t.value,y=t.value.querySelector(".sector__before"),_=t.value.querySelector(".sector__after"),w=t.value.querySelector(".sector__content");Object.assign(n.value.style,{width:r,height:r}),Object.assign(h.style,p),Object.assign(y.style,m),Object.assign(_.style,m),Object.assign(w.style,m),Object.assign(y.style,j),Object.assign(_.style,v),Object.assign(w.style,O)}),{sector:t,sectorContainer:n}}}),p=(n("9e84"),n("6b0d")),m=n.n(p);const j=m()(g,[["render",d],["__scopeId","data-v-44135f74"]]);t["a"]=j},d57a:function(e,t,n){"use strict";n("0f11")},f22a:function(e,t,n){},f46c:function(e,t,n){"use strict";n("f22a")},fef8:function(e,t,n){"use strict";n.r(t);var a=n("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-a606d418"),e=e(),Object(a["popScopeId"])(),e),r={class:"py-6 flex justify-center overflow-hidden"},c={class:"wheel mb-4"},l={class:"wheel__content",ref:"wheelElt"},i=o(()=>Object(a["createElementVNode"])("div",{class:"wheel__innerShadow"},null,-1));function s(e,t,n,o,s,d){const b=Object(a["resolveComponent"])("svg-icon"),u=Object(a["resolveComponent"])("Sector"),f=Object(a["resolveComponent"])("van-button");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",c,[Object(a["createVNode"])(b,{class:"wheel__pointer",name:"wheel-pointer",size:60}),Object(a["createVNode"])(b,{class:"wheel__border",name:"wheel-border",size:327}),Object(a["createElementVNode"])("div",l,[i,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.wheelList,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(u,{class:"wheel__sector",style:Object(a["normalizeStyle"])(e.getSectorStyle(n)),key:n,text:"â‚¹ "+e.numeralHelper.asFloat(t.worth,0),"background-color":e.getColor(t,n),"border-thickness":0,diameter:280,sectorAngleInDegree:e.sectorAngle,initialQuadrant:4,fontColor:e.getFontColor(t),fontSize:"1.5rem"},null,8,["style","text","background-color","sectorAngleInDegree","fontColor"]))),128))],512)])]),Object(a["createVNode"])(f,{type:"primary",onClick:e.spin,block:"",disabled:e.stage==e.EStage.spinning},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Spin")]),_:1},8,["onClick","disabled"])],64)}var d=n("72f9"),b=n("1e5b"),u=n("c860"),f=n("cd1e"),g=n("c69a"),p=n("dcfe");const m=(e,t)=>Math.round(e+Math.random()*(t-e));var j;(function(e){e[e["idle"]=0]="idle",e[e["spinning"]=1]="spinning"})(j||(j={}));var O=Object(a["defineComponent"])({name:"SpinWheel",components:{SubLayout:d["a"],Sector:f["a"]},setup(){const e={firstPrize:"#fff",0:"#fa638b",1:"#f9ea63",2:"#25b8d7",3:"#62faba"},t=Object(b["d"])({list:[],wheelList:[],prizesLength:0,initialDegree:90,targetDegree:0,stage:j.idle,counter:1,sectorAngle:0,luckyList:[]}),n=Object(a["ref"])(),o=Object(b["a"])(()=>360/t.list.length),r=Object(b["a"])(()=>Number(o.value.toFixed(2))),c=async()=>{if(t.stage==j.spinning)return;const e=m(0,t.list.length),n=t.list[e],a=n.worth.toString();l(a),setTimeout(async()=>{await d()},5e3)},l=e=>{let n=0;const a=10800*t.counter,r=t.list.findIndex(t=>t.worth==e);Object(u["a"])(-1!=r,"prize not found");t.list.findIndex(e=>(n+=o.value,Math.floor(n)>=t.initialDegree));const c=o.value*r-t.initialDegree,l=+o.value/2;t.targetDegree=-(a+c+l)};Object(a["watch"])(()=>t.targetDegree,()=>{t.stage=j.spinning,n.value.style.transform=`rotate(${t.targetDegree}deg)`});const i=async()=>{const e=await g["a"].getRoulette({type:1});console.log("roulette",e),t.list=e.data,t.prizesLength=e.data.length,t.sectorAngle=360/t.prizesLength},s=e=>{let n=Number(e[0].worth);for(let t=0;t<e.length;t++)Number(e[t].worth)>n&&(n=Number(e[t].worth));e.map(e=>{Number(e.worth)==n&&(e.firstPrize=!0)}),t.wheelList=e},d=async()=>{await g["a"].getRouletteRecord()};return Object(b["c"])(async()=>{n.value.addEventListener("transitionstart",()=>{console.log("anim start")}),n.value.addEventListener("transitionend",()=>{console.log("animation has ended"),t.stage=j.idle,t.counter++}),await i(),await s(t.list),await d()}),{...Object(b["f"])(t),radius:r,wheelElt:n,spin:c,EStage:j,getColor(t,n){return t.firstPrize?e.firstPrize:e[n%4]},getFontColor(e){return e.firstPrize?"#000":"#fff"},getSectorStyle(e){return`transform: rotate(${t.sectorAngle*e}deg)`},numeralHelper:p["a"]}}}),v=(n("d57a"),n("6b0d")),h=n.n(v);const y=h()(O,[["render",s],["__scopeId","data-v-a606d418"]]);t["default"]=y}}]);