(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ade5360"],{3366:function(e,t,n){"use strict";n.r(t);var a=n("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-7b8db3c0"),e=e(),Object(a["popScopeId"])(),e),r={class:"py-6 flex justify-center overflow-hidden"},c={class:"wheel mb-4"},l={class:"wheel__content",ref:"wheelElt"},i=o(()=>Object(a["createElementVNode"])("div",{class:"wheel__innerShadow"},null,-1)),s={class:"luckyWinner"},d=o(()=>Object(a["createElementVNode"])("div",{class:"luckyWinner__title"},"Lucky winner",-1)),b={class:"luckyWinner__textLine"},u={class:"luckyUser"},f={class:"luckyMoney"};function g(e,t,n,o,g,p){const j=Object(a["resolveComponent"])("MyEarn"),O=Object(a["resolveComponent"])("svg-icon"),m=Object(a["resolveComponent"])("Sector"),y=Object(a["resolveComponent"])("van-button"),v=Object(a["resolveComponent"])("SubLayout");return Object(a["openBlock"])(),Object(a["createBlock"])(v,{pageTitle:"Wheel"},{navRight:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j)]),default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",c,[Object(a["createVNode"])(O,{class:"wheel__pointer",name:"wheel-pointer",size:60}),Object(a["createVNode"])(O,{class:"wheel__border",name:"wheel-border",size:327}),Object(a["createElementVNode"])("div",l,[i,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.wheelList,(t,n)=>(Object(a["openBlock"])(),Object(a["createBlock"])(m,{class:"wheel__sector",style:Object(a["normalizeStyle"])(e.getSectorStyle(n)),key:n,text:"₹ "+e.numeralHelper.asFloat(t.worth,0),"background-color":e.getColor(t,n),"border-thickness":0,diameter:280,sectorAngleInDegree:e.sectorAngle,initialQuadrant:4,fontColor:e.getFontColor(t),fontSize:"1.5rem"},null,8,["style","text","background-color","sectorAngleInDegree","fontColor"]))),128))],512)])]),Object(a["createElementVNode"])("div",s,[d,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.luckyList,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[Object(a["createElementVNode"])("div",u,Object(a["toDisplayString"])(t.username),1),Object(a["createElementVNode"])("div",f,"₹ "+Object(a["toDisplayString"])(e.numeralHelper.asFloat(t.worth,2)),1)]))),256))]),Object(a["createVNode"])(y,{class:"spin-btn btn-tertiary",type:"primary",onClick:e.spin,block:"",disabled:e.stage==e.EStage.spinning},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Spin")]),_:1},8,["onClick","disabled"])]),_:1})}var p=n("a0aa"),j=n("72f9"),O=n("1e5b"),m=n("c860"),y=n("cd1e"),v=n("c69a"),h=n("dcfe");var _;(function(e){e[e["idle"]=0]="idle",e[e["spinning"]=1]="spinning"})(_||(_={}));var w=Object(a["defineComponent"])({name:"SpinWheel",components:{SubLayout:j["a"],MyEarn:p["a"],Sector:y["a"]},setup(){const e={firstPrize:"#fff",0:"#fa638b",1:"#f9ea63",2:"#25b8d7",3:"#62faba"},t=Object(O["d"])({list:[],wheelList:[],prizesLength:0,initialDegree:90,targetDegree:0,stage:_.idle,counter:1,sectorAngle:0,luckyList:[]}),n=Object(a["ref"])(),o=Object(O["a"])(()=>360/t.list.length),r=Object(O["a"])(()=>Number(o.value.toFixed(2))),c=async()=>{if(t.stage==_.spinning)return;const e=Math.min(Math.floor(10*Math.random()),t.list.length-1),n=t.list[e];console.log("prize",n),l(n.worth),setTimeout(async()=>{await d()},5e3)},l=e=>{let n=0;const a=10800*t.counter,r=t.list.findIndex(t=>t.worth==e);Object(m["a"])(-1!=r,`prize:${e} not found in ${t.list}`);t.list.findIndex(e=>(n+=o.value,Math.floor(n)>=t.initialDegree));const c=o.value*r-t.initialDegree,l=+o.value/2;t.targetDegree=-(a+c+l)};Object(a["watch"])(()=>t.targetDegree,()=>{t.stage=_.spinning,n.value.style.transform=`rotate(${t.targetDegree}deg)`});const i=async()=>{const e=await v["a"].getRoulette({type:1});console.log("roulette",e),t.list=e.data,t.prizesLength=e.data.length,t.sectorAngle=360/t.prizesLength},s=e=>{let n=Number(e[0].worth);for(let t=0;t<e.length;t++)Number(e[t].worth)>n&&(n=Number(e[t].worth));e.map(e=>{Number(e.worth)==n&&(e.firstPrize=!0)}),t.wheelList=e},d=async()=>{const e=await v["a"].getRouletteRecord();t.luckyList=e.data};return Object(O["c"])(async()=>{n.value.addEventListener("transitionstart",()=>{console.log("anim start")}),n.value.addEventListener("transitionend",()=>{console.log("animation has ended"),t.stage=_.idle,t.counter++}),await i(),await s(t.list),await d()}),{...Object(O["f"])(t),radius:r,wheelElt:n,spin:c,EStage:_,getColor(t,n){return t.firstPrize?e.firstPrize:e[n%4]},getFontColor(e){return e.firstPrize?"#000":"#fff"},getSectorStyle(e){return`transform: rotate(${t.sectorAngle*e}deg)`},numeralHelper:h["a"]}}}),k=(n("9b92"),n("6b0d")),S=n.n(k);const C=S()(w,[["render",g],["__scopeId","data-v-7b8db3c0"]]);t["default"]=C},"3f2f":function(e,t,n){"use strict";n("a25f")},"72f9":function(e,t,n){"use strict";var a=n("7a23");const o={id:"main"},r={class:"container"};function c(e,t,n,c,l,i){const s=Object(a["resolveComponent"])("van-nav-bar");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(s,{class:"mb-4","left-text":e.pageTitle,"left-arrow":"","safe-area-inset-top":"",border:!1,onClickLeft:e.backRouter},{right:Object(a["withCtx"])(()=>[Object(a["renderSlot"])(e.$slots,"navRight",{},void 0,!0)]),_:3},8,["left-text","onClickLeft"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])])],64)}var l=Object(a["defineComponent"])({name:"SubLayout",slot:["navRight"],props:{pageTitle:{type:String,default:""},backRouter:{type:Function,default:()=>{window.history.back()}}}}),i=(n("3f2f"),n("6b0d")),s=n.n(i);const d=s()(l,[["render",c],["__scopeId","data-v-bec054d8"]]);t["a"]=d},"8d29":function(e,t,n){},"9b92":function(e,t,n){"use strict";n("b97a")},"9e84":function(e,t,n){"use strict";n("8d29")},a0aa:function(e,t,n){"use strict";var a=n("7a23");const o={class:"grid grid-cols-2 gap-2"},r={class:"info"},c={class:"info__text"},l={class:"info"},i={class:"info__text"};function s(e,t,n,s,d,b){const u=Object(a["resolveComponent"])("svg-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(u,{name:"cash",size:28}),Object(a["createElementVNode"])("div",c,Object(a["toDisplayString"])(e.numeralHelper.asFloat(e.pay_out_balance,2)),1)]),Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(u,{name:"coin",size:28}),Object(a["createElementVNode"])("div",i,Object(a["toDisplayString"])(e.numeralHelper.asFloat(e.coin_balance,2)),1)])])}var d=n("1e5b"),b=n("c69a"),u=n("dcfe"),f=Object(a["defineComponent"])({name:"MyEarn",setup(){const e=Object(d["d"])({coin_balance:"",pay_out_balance:""}),t=async()=>{const t=await b["a"].GetBalance();e.coin_balance=t.data.coin_balance,e.pay_out_balance=t.data.pay_out_balance};return Object(d["c"])(async()=>{await t()}),{...Object(d["f"])(e),numeralHelper:u["a"]}}}),g=(n("f46c"),n("6b0d")),p=n.n(g);const j=p()(f,[["render",s],["__scopeId","data-v-6b7f6702"]]);t["a"]=j},a25f:function(e,t,n){},b97a:function(e,t,n){},cd1e:function(e,t,n){"use strict";var a=n("7a23");const o=e=>(Object(a["pushScopeId"])("data-v-44135f74"),e=e(),Object(a["popScopeId"])(),e),r={class:"container relative",ref:"sectorContainer"},c={class:"sector",ref:"sector"},l=o(()=>Object(a["createElementVNode"])("div",{class:"sector__before"},null,-1)),i={class:"sector__content"},s=o(()=>Object(a["createElementVNode"])("div",{class:"sector__after"},null,-1));function d(e,t,n,o,d,b){return Object(a["openBlock"])(),Object(a["createElementBlock"])("section",null,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",c,[l,Object(a["createElementVNode"])("div",i,Object(a["toDisplayString"])(e.text),1),s],512)],512)])}var b=n("a0aa"),u=n("72f9"),f=n("1e5b");var g=Object(a["defineComponent"])({name:"Sector",components:{SubLayout:u["a"],MyEarn:b["a"]},props:{diameter:{type:Number,default:200},unit:{type:String,default:"px"},backgroundColor:{type:String,default:"#000"},borderThickness:{type:Number,default:2},borderColor:{type:String,default:"#ab0"},sectorAngleInDegree:{type:Number,default:45},initialQuadrant:{type:Number,default:2},text:{type:String,default:"12340"},fontSize:{type:String,default:"10px"},fontColor:{type:String,default:"#fff"}},setup(e){const t=Object(a["ref"])(),n=Object(a["ref"])();return Object(f["c"])(()=>{const a=e.unit,o=`${e.diameter/2}${a}`,r=`${e.diameter}${a}`,c=e.backgroundColor,l=e.borderColor,i=e.borderThickness,s=`${i}${a} ${i}${a} 0`,d=`${o} ${o} 0 0`,b=`${o} ${o}`,u=-90,f=e.fontSize,g=e.fontColor,p={marginLeft:o,width:o,height:r,borderRadius:`0 ${o} ${o} 0`,transform:`rotate(${90*(e.initialQuadrant-1)}deg)`,transformOrigin:"0px "+o},j={boxSizing:"border-box",width:r,height:o,backgroundColor:c,borderColor:l,borderWidth:s,borderRadius:d,transformOrigin:b},O={transform:`rotate(${u+e.sectorAngleInDegree}deg)`},m={transform:`rotate(${u+e.sectorAngleInDegree/2}deg)`,display:"flex",alignSelf:"flex-end",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-end",lineHeight:0,fontSize:f,color:g},y={transform:`rotate(${u+180}deg)`},v=t.value,h=t.value.querySelector(".sector__before"),_=t.value.querySelector(".sector__after"),w=t.value.querySelector(".sector__content");Object.assign(n.value.style,{width:r,height:r}),Object.assign(v.style,p),Object.assign(h.style,j),Object.assign(_.style,j),Object.assign(w.style,j),Object.assign(h.style,O),Object.assign(_.style,y),Object.assign(w.style,m)}),{sector:t,sectorContainer:n}}}),p=(n("9e84"),n("6b0d")),j=n.n(p);const O=j()(g,[["render",d],["__scopeId","data-v-44135f74"]]);t["a"]=O},f22a:function(e,t,n){},f46c:function(e,t,n){"use strict";n("f22a")}}]);