(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf54d8f8"],{2690:function(e,t,a){"use strict";a("d052")},"3f2f":function(e,t,a){"use strict";a("a25f")},"72f9":function(e,t,a){"use strict";var c=a("7a23");const o={id:"main"},s={class:"container"};function l(e,t,a,l,n,i){const d=Object(c["resolveComponent"])("van-nav-bar");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(d,{class:"mb-4","left-text":e.pageTitle,"left-arrow":"","safe-area-inset-top":"",border:!1,onClickLeft:e.backRouter},{right:Object(c["withCtx"])(()=>[Object(c["renderSlot"])(e.$slots,"navRight",{},void 0,!0)]),_:3},8,["left-text","onClickLeft"]),Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",s,[Object(c["renderSlot"])(e.$slots,"default",{},void 0,!0)])])],64)}var n=Object(c["defineComponent"])({name:"SubLayout",slot:["navRight"],props:{pageTitle:{type:String,default:""},backRouter:{type:Function,default:()=>{window.history.back()}}}}),i=(a("3f2f"),a("6b0d")),d=a.n(i);const r=d()(n,[["render",l],["__scopeId","data-v-bec054d8"]]);t["a"]=r},"8ecd":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o=e=>(Object(c["pushScopeId"])("data-v-7c0075de"),e=e(),Object(c["popScopeId"])(),e),s={class:"task-detail"},l={class:"flex items-center mb-4"},n=o(()=>Object(c["createElementVNode"])("div",{class:"quest-img"},null,-1)),i={class:"quest_name"},d={class:"quest_reward"},r={class:"reward"},b={class:"mb-2 flex items-center opacity-50"},u={class:"text-sm text-white"},m={class:"text-white text-base"},p=o(()=>Object(c["createElementVNode"])("div",{class:"upload-title"},"Screenshots",-1)),O={class:"upload-card"},j=o(()=>Object(c["createElementVNode"])("div",{class:"text-base text-white"},"You haven’t upload screenshots yet",-1)),g={class:"flex items-center"},f=o(()=>Object(c["createElementVNode"])("p",null,"Upload screenshots",-1)),v={class:"date"},w=["src"],N={class:"p-6"},h={class:"upload_dialog-header"},V=o(()=>Object(c["createElementVNode"])("div",{class:"title"},"Upload screenshots",-1)),y={class:"upload_dialog-body"},x={class:"dashBox"};function k(e,t,a,o,k,E){const C=Object(c["resolveComponent"])("SubLayout"),q=Object(c["resolveComponent"])("SvgIcon"),_=Object(c["resolveComponent"])("van-button"),S=Object(c["resolveComponent"])("van-uploader"),I=Object(c["resolveComponent"])("van-dialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(C,{pageTitle:"Task detail"}),Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",l,[n,Object(c["createElementVNode"])("div",i,Object(c["toDisplayString"])(e.questDetail.title),1),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("p",r,Object(c["toDisplayString"])(e.questDetail.worth),1),Object(c["createVNode"])(q,{name:"coin",size:28})])]),Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(q,{class:"text-xl mr-1",name:"quota",size:28}),Object(c["createElementVNode"])("div",u,Object(c["toDisplayString"])(e.questDetail.amount||0)+" quota",1)]),Object(c["createElementVNode"])("div",m,Object(c["toDisplayString"])(e.questDetail.content),1),p,Object(c["createElementVNode"])("div",O,[j,Object(c["createVNode"])(_,{class:"mt-4 btn-tertiary",onClick:t[0]||(t[0]=t=>e.show=!0),block:""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",g,[Object(c["createVNode"])(q,{class:"mr-2",name:"download",size:24}),f])]),_:1}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.questImg,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"photo-box",key:e},[Object(c["createElementVNode"])("div",v,Object(c["toDisplayString"])(e.datetime),1),Object(c["createElementVNode"])("img",{src:"data:image/png;base64,"+e.context,alt:"game"},null,8,w)]))),128))])]),Object(c["createVNode"])(I,{show:e.show,"onUpdate:show":t[3]||(t[3]=t=>e.show=t),showConfirmButton:!1,showCancelButton:!1,closeOnClickOverlay:!0,className:"bg-bg text-light text-xl",onClose:e.closeDialog},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(q,{class:"closeBtn",name:"close",size:20,onClick:t[1]||(t[1]=t=>e.show=!1)}),V]),Object(c["createElementVNode"])("div",y,[Object(c["createVNode"])(S,{modelValue:e.fileList,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fileList=t),"before-read":e.beforeRead,"max-size":512e3,onOversize:e.onOversize,"max-count":"1",delete:e.deleteFile},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(_,{class:"uploadBtn"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(q,{name:"add",size:24})])]),_:1})]),_:1},8,["modelValue","before-read","onOversize","delete"]),Object(c["createVNode"])(_,{class:"mt-4 btn-tertiary",block:"",onClick:e.doSubmit},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("Submit")]),_:1},8,["onClick"])])])]),_:1},8,["show","onClose"])],64)}var E=a("1e5b"),C=a("72f9"),q=a("6c43"),_=a("c69a"),S=Object(c["defineComponent"])({name:"QuestDetail",components:{SubLayout:C["a"]},props:{questId:{type:String},reward_type:{type:String}},setup(e){const t=Object(E["d"])({show:!1,fileList:[],questDetail:{},questImg:[]}),a=async()=>{console.log("props.questId",e.questId),console.log("props.rewardType",e.reward_type);const a={questId:Number(e.questId),reward_type:Number(e.reward_type)},c=await _["a"].getQuest(a);console.log("questDetail",c),t.questDetail=c.data},c=async()=>{const a={extra_mission_id:Number(e.questId)},c=await _["a"].getQuestImg(a);console.log("imgArr",c),t.questImg=c.data},o=e=>{e.map(e=>{e.datetime=e.datetime.split(" ")[0]})};Object(E["c"])(async()=>{await a(),await c(),await o(t.questImg)});const s=()=>{console.log("close Dialog"),i()},l=e=>(console.log("file.type ",e.type),console.log("before file",e),"image/jpeg"===e.type||"image/png"===e.type||(Object(q["a"])("请上传 jpg/png 格式图片"),!1)),n=e=>{console.log("file.size ",e.size),Object(q["a"])("file size can't be over 500kb")},i=()=>{t.fileList=[]},d=async()=>{const a={extra_mission_id:Number(e.questId),context:t.fileList[0].content};await _["a"].PostQuestImg(a).then(async e=>{e&&(q["a"].success("success"),t.show=!1,i(),await c(),await o(t.questImg))}).catch(e=>{q["a"].fail(e.data.error_msg)})};return{...Object(E["f"])(t),beforeRead:l,onOversize:n,deleteFile:i,closeDialog:s,doSubmit:d}}}),I=(a("2690"),a("6b0d")),D=a.n(I);const z=D()(S,[["render",k],["__scopeId","data-v-7c0075de"]]);t["default"]=z},a25f:function(e,t,a){},d052:function(e,t,a){}}]);